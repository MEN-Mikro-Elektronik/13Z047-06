<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Z47 MDIS Driver - Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Z47 MDIS Driver &nbsp; </h1>
	<h3>Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>Z47 MDIS Driver Documentation</h1>
<p>
This is the documentation of the MDIS5 low-level driver for the Z47 Watchdog IP core.<p>
<br>
 <h2><a name="FuncDesc"></a>
Functional Description</h2>
<br>
 <h3><a name="IpCore"></a>
IP Core</h3>
The Z47 is a general purpose software watchdog device that can be used to supervise the state of a running software module. To do this, the software module has to trigger the watchdog within a defined time intervall. In an error case, the watchdog can trigger an output pin (e.g. to reset the CPU or switch into a save mode) or generate an IRQ (e.g. to inform an application about the error case).<br>
 <br>
 Max Timeout:<br>
 A free running counter with base 1us is incrementing until a configurable max timeout compare value is reached. If the software triggers the counter to restart counting from 0 before the compare value has reached, no error will be indicated. If the software is not able to trigger the counter and the compare value is reached, an error will be signalled (the output pin will be triggered).<br>
 <br>
 Min Timeout (Windowed Watchdog):<br>
 Additionally, to the max timeout compare value, a min timeout compare value can be configured. If the trigger is within the range of minimum and maximum compare value, the counter will be cleared and restarts at 0. If the trigger comes before the min compare value has been reached, the software can be considered as faulty and the watchdog signals the error in the same way as when the max compare value is reached.<br>
 <br>
 IRQ Timeout:<br>
 An IRQ compare value can be configured to trigger an interrupt if the counter reaches this timeout value.<br>
 <br>
 Additional Features:<br>
<ul>
<li>To trigger the counter, an alternating byte value is used (to detect additionally SW faults).</li><li>Output pin and IRQ pin can be set manually from the SW.</li><li>SW configurable error pin that can be used to switch e.g. an error LED.</li><li>Status information (watchdog enabled/disable) can be queried.</li><li>Information about last output/IRQ pin trigger can be queried.</li></ul>
<p>
<br>
 <h3><a name="Driver"></a>
Driver</h3>
The driver supports controlling of the Z47 Watchdog via M_setstat() and M_getstat(), see <a class="el" href="index.html#getstat_setstat_codes">Getstat / Setstat codes</a>. An interrupt can be used to inform applications via an MDIS signal about an error case.<p>
When the first path is opened to an Z47 device, the HW and the driver are being initialized. <br>
<p>
<br>
 <h2><a name="api_functions"></a>
Supported API Functions</h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API Function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding Low - Level Function</b> </td></tr>
<tr>
<td>M_open() </td><td>Open device </td><td><a class="el" href="z47__drv_8c.html#a8">Z47_Init()</a> </td></tr>
<tr>
<td>M_close() </td><td>Close device </td><td><a class="el" href="z47__drv_8c.html#a9">Z47_Exit()</a> </td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter </td><td><a class="el" href="z47__drv_8c.html#a12">Z47_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter </td><td><a class="el" href="z47__drv_8c.html#a13">Z47_GetStat()</a> </td></tr>
<tr>
<td>M_errstringTs() </td><td>Generate error message </td><td>- </td></tr>
<tr>
<td>- </td><td>Interrupt Handling </td><td><a class="el" href="z47__drv_8c.html#a16">Z47_Irq()</a> </td></tr>
</table>
<p>
<br>
 <h2><a name="getstat_setstat_codes"></a>
Getstat / Setstat codes</h2>
The driver supports the following Getstat / Setstat codes (defined in <a class="el" href="wdog_8h.html">wdog.h</a>):<ul>
<li><a class="el" href="wdog_8h.html#a1">WDOG_START</a></li><li><a class="el" href="wdog_8h.html#a3">WDOG_STOP</a></li><li><a class="el" href="wdog_8h.html#a2">WDOG_TRIG</a></li><li><a class="el" href="wdog_8h.html#a4">WDOG_TIME</a></li><li><a class="el" href="wdog_8h.html#a5">WDOG_STATUS</a></li><li><a class="el" href="wdog_8h.html#a6">WDOG_SHOT</a><br>
</li><li><a class="el" href="wdog_8h.html#a7">WDOG_RESET_CTRL</a><br>
</li><li><a class="el" href="wdog_8h.html#a8">WDOG_TRIG_PAT</a><br>
</li><li><a class="el" href="wdog_8h.html#a9">WDOG_TIME_MIN</a><br>
</li><li><a class="el" href="wdog_8h.html#a10">WDOG_TIME_MAX</a><br>
</li><li><a class="el" href="wdog_8h.html#a11">WDOG_TIME_IRQ</a><br>
</li><li><a class="el" href="wdog_8h.html#a12">WDOG_OUT_PIN</a><br>
</li><li><a class="el" href="wdog_8h.html#a13">WDOG_OUT_REASON</a><br>
</li><li><a class="el" href="wdog_8h.html#a14">WDOG_IRQ_PIN</a><br>
</li><li><a class="el" href="wdog_8h.html#a15">WDOG_IRQ_SIGSET</a><br>
</li><li><a class="el" href="wdog_8h.html#a16">WDOG_IRQ_SIGCLR</a><br>
</li><li><a class="el" href="wdog_8h.html#a17">WDOG_IRQ_REASON</a><br>
</li><li><a class="el" href="wdog_8h.html#a18">WDOG_ERR_PIN</a><br>
</li></ul>
<p>
<br>
 <h2><a name="programs"></a>
Overview of provided programs</h2>
<h3><a name="wdog_ctrl"></a>
Watchdog control tool</h3>
wdog_ctrl.c(see example section)<h3><a name="wdog_simp"></a>
Simple watchdog example program</h3>
wdog_simp.c(see example section)<h3><a name="wdog_test"></a>
Watchdog test tool</h3>
wdog_test.c(see example section) 
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Z47 MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2016 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

